<!DOCTYPE html>
<html lang="en">

<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>Pluto - Responsive Bootstrap Admin Panel Templates</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- site icon -->

    <script src="https://kit.fontawesome.com/dbf4841881.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/color_2.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-select.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/perfect-scrollbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/semantic.min.css') }}">

    <!-- ... và các tệp khác -->


</head>

<body class="inner_page widgets">
    <div class="full_container">
        <div class="inner_container">
            <!-- Sidebar  -->
            <nav id="sidebar">
                <div class="sidebar_blog_1">
                    <div class="sidebar-header">
                        <div class="logo_section">
                            <a href=""><img class="logo_icon img-responsive"
                                    src="{{ url_for('static', filename='images/logo/logo_icon.png') }}" alt="#">
                            </a>
                        </div>
                    </div>
                    <div class="sidebar_user_info">
                        <div class="icon_setting"></div>
                        <div class="user_profle_side">
                            <div class="user_img"><img class="img-responsive"
                                    src="{{ url_for('static', filename='images/layout_img/user.png') }}" alt="#" />
                            </div>
                            <div class="user_info">
                                <h6>Manager</h6>
                                <p><span class="online_animation"></span> Online</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sidebar_blog_2">
                    <h4>General</h4>
                    <ul class="list-unstyled components">
                        <li><a href="/widgets.html"><i class="fa-solid fa-bed orange_color"></i> <span>List
                                    Rooms</span></a>
                        </li>
                        <li>
                            <a href="#element" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><i
                                    class="fa fa-diamond purple_color"></i> <span>Room rental voucher</span></a>
                            <ul class="collapse list-unstyled" id="element">
                                <li><a href="{{url_for('general_elements')}}"> <span>> Extend the rental date</span></a>
                                </li>
                                <li><a href="{{url_for('media_gallery')}}">> <span>Room Status</span></a></li>
                                <li><a href="{{url_for('icons')}}">> <span>Destroy the rental room</span></a></li>
                                <li><a href="{{url_for('invoice')}}">> <span>Change the rental date </span></a></li>
                            </ul>
                        </li>
                        <li><a href="{{url_for('tables')}}"><i class="fa-solid fa-person purple_color2"></i> <span>List
                                    Customers</span></a>
                        </li>
                        <li><a href="{{url_for('price')}}"><i
                                    class="fa-solid fa-person-military-pointing blue1_color"></i>
                                <span>List
                                    Employee</span></a></li>
                        <li>
                            <a href="{{url_for('contact')}}">
                                <i class="fa fa-paper-plane red_color"></i> <span>Room rental voucher</span></a>
                        </li>
                        <li><a href="{{url_for('map')}}"><i class="fa-solid fa-wallet purple_color2"></i> <span>Room
                                    Bill</span></a>
                        </li>
                        <li><a href="{{url_for('charts')}}"><i class="fa-solid fa-money-bill green_color"></i>
                                <span>Restaurant
                                    Bill</span></a></li>
                        <li><a href="{{url_for('settings')}}"><i class="fa fa-cog yellow_color"></i>
                                <span>Settings</span></a>
                        </li>
                    </ul>
                </div>
            </nav>
            <!-- end sidebar -->
            <!-- right content -->
            <div id="content">
                <!-- topbar -->
                <div class="topbar">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <div class="full">
                            <button type="button" id="sidebarCollapse" class="sidebar_toggle"><i
                                    class="fa fa-bars"></i></button>
                            <div class="logo_section">
                                <a href="index.html"><img class="img-responsive"
                                        src="{{ url_for('static', filename='images/logo/logo_icon.png') }}"
                                        alt="#" /></a>
                            </div>
                            <div class="right_topbar">
                                <div class="icon_info">
                                    <ul class="user_profile_dd">
                                        <li>
                                            <a class="dropdown-toggle" data-toggle="dropdown"><img
                                                    class="img-responsive rounded-circle"
                                                    src="{{ url_for('static', filename='images/layout_img/user.png') }}"
                                                    alt="#" /><span class="name_user">Manager</span></a>
                                            <div class="dropdown-menu">
                                                <!-- <a class="dropdown-item" href="profile.html">My Profile</a> -->
                                                <a class="dropdown-item" href="settings.html">Settings</a>
                                                <!-- <a class="dropdown-item" href="help.html">Help</a> -->
                                                <a class="dropdown-item" href="{{url_for('logout')}}"><span>Log
                                                        Out</span> <i class="fa fa-sign-out"></i></a>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
                <!-- end topbar -->
                <!-- dashboard inner -->
                <div class="midde_cont">
                    <div class="container-fluid">
                        <div class="row column_title">
                            <div class="col-md-12">
                                <div class="page_title">
                                    <h2>Rooom rental bill</small></h2>
                                </div>
                            </div>
                        </div>
                        <!-- row -->
                        <div class="row">
                            <!-- invoice section -->
                            <div class="col-md-12">
                                <div class="white_shd full margin_bottom_30">
                                    <div class="full padding_infor_info">
                                        <div class="table_row">
                                            <div class="table-responsive">
                                                <form action="" class="table table-striped" enctype="multipart/form-data" method="post">
                                                    <div class="form-group">
                                                        <label for="MAKH">Hình Thức Thanh Toán</label>
                                                        <input type="text" class="form-control" id="HinhThucThanhToan"
                                                            name="HinhThucThanhToan" required readonly value="Trực tiếp"">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="NgayNhanPhong">Ngày Nhận Phòng</label>
                                                        <input type="date" class="form-control" id="NgayNhanPhong"
                                                            name="NgayNhanPhong" required  >
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="NgayTraPhong">Ngày Trả Phòng</label>
                                                        <input type="date" class="form-control" id="NgayTraPhong"
                                                            name="NgayTraPhong" required  >
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="SoLuongNguoiLon">Số Lượng Người Lớn</label>
                                                        <div class="input-group">
                                                            <select class="form-control" id="SoLuongNguoiLon" name="SoLuongNguoiLon" required>
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="SoLuongTreEm">Số Lượng Trẻ Em</label>
                                                        <div class="input-group">
                                                            <select class="form-control" id="SoLuongTreEm" name="SoLuongTreEm" required>
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="TongTien">Tổng Tiền</label>
                                                        <input type="text" class="form-control" id="TongTien"
                                                            name="TongTien" required readonly value="0">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="GhiChu">Ghi Chú</label>
                                                        <textarea name="GhiChu" id="GhiChu" rows="4" class="form-control"></textarea>      
                                                    </div>
                                    
                                                    <div class="form-group">
                                                        <label for="MAKH">Nhập email khách hàng</label>
                                                        <input type="text" class="form-control" id="MAKH"
                                                        name="MAKH" required >
                                                    </div> 
                                                    <div class="form-group">
                                                        <label for="Maphong">Mã Phòng</label>
                                                        <select class="form-control" id="Maphong" name="Maphong" required>
                                                            <option value="" disabled selected>Chọn phòng</option>
                                                            {% for room in result_get_infor %}
                                                            <option value="{{ room[1] }}">{{ room[0] }}</option>
                                                            {% endfor %}                                      
                                                        </select>
                
                                                    </div>      
                        
                                                    <div class=" row">
                                                        <div class="col-md-4">
                                                            <button type="" onclick="history.back()" 
                                                                class="btn btn-danger btn-block">Back</button>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <button type="submit" class="btn btn-warning btn-block">Add
                                                                Bill</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-fluid">
                        <div class="footer">
                            <p>Copyright © 2018 Designed by html.design. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById("Maphong").addEventListener("change", function() {
            var selectedRoom = this.value; // Lấy giá trị phòng đã chọn
            
            // Gửi yêu cầu POST để cập nhật tổng tiền từ máy chủ
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/update_total_price", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.onload = function () {
                if (xhr.status == 200) {
                    
                    var response = JSON.parse(xhr.responseText);
                    document.getElementById("TongTien").value = response.total_price+" VND";
                }
            };
            xhr.send(JSON.stringify({ selected_room: selectedRoom }));
        });
    </script>
    <style>
        /* Định nghĩa lớp cho hộp thoại alert */
        .centered-alert {
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            /* Màu nền đục để tạo hiệu ứng xám */
            z-index: 9999;
            /* Đảm bảo hộp thoại hiển thị trên cùng */
        }

        .alert-box {
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.75);
            text-align: center;
            padding: 20px;
            max-width: 400px;
            width: 80%;
        }

        .oke-button {
            margin-top: 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            margin-left: 20px;
        }
    </style>

    <script>
        var message = "{{ message }}";  // Nhận thông báo từ Flask và chuyển thành JavaScript string

        if (message) {
            // Tạo một phần tử div để chứa hộp thoại
            var alertDiv = document.createElement("div");
            alertDiv.className = "centered-alert";

            // Tạo hộp thoại alert và đưa nội dung vào
            var alertBox = document.createElement("div");
            alertBox.className = "alert-box";
            alertBox.textContent = message;

            // Tạo nút Oke
            var okeButton = document.createElement("button");
            okeButton.className = "oke-button";
            okeButton.textContent = "Ok";

            // Đưa nút Oke và hộp thoại alert vào phần tử div chứa
            alertBox.appendChild(okeButton);
            alertDiv.appendChild(alertBox);

            // Đưa phần tử div chứa vào body của trang
            document.body.appendChild(alertDiv);

            // Bắt sự kiện khi người dùng bấm nút Oke và ẩn hộp thoại
            okeButton.addEventListener("click", function () {
                alertDiv.style.display = "none";
            });
        }
    </script>

    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/animate.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap-select.js') }}"></script>
    <script src="{{ url_for('static', filename='js/owl.carousel.js') }}"></script>
    <script src="{{ url_for('static', filename='js/Chart.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/Chart.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/analyser.js') }}"></script>
    <script src="{{ url_for('static', filename='js/perfect-scrollbar.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
</body>

</html>